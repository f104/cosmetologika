/*!
 * fancyBox - jQuery Plugin
 * version: 3.0.0 Beta 1 (Tue, 29 Jan 2013)
 * @requires jQuery v1.7 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2013 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(k,n,i,f){var d=i(k),a=i(n),o=i("html");var p=i.fancybox=function(){p.open.apply(this,arguments)};var g=p.isTouch=(n.createTouch!==f||k.ontouchstart!==f);var j=function(q){return q&&q.hasOwnProperty&&q instanceof i};var c=function(q){return q&&i.type(q)==="string"};var l=function(q){return c(q)&&q.indexOf("%")>0};var m=function(s,r){var q=parseFloat(s,10)||0;if(r&&l(s)){q=p.getViewport()[r]/100*q}return Math.ceil(q)};var h=function(q,r){return m(q,r)+"px"};var e=Date.now||function(){return +new Date};var b=function(s){var q=c(s)?i(s):s;if(q&&q.length){q.removeClass("fancybox-wrap").stop(true).trigger("onReset").hide().unbind();try{q.find("iframe").unbind().attr("src",g?"":"//about:blank");setTimeout(function(){q.empty().remove();if(p.lock&&!p.coming&&!p.current){var t,u;i(".fancybox-margin").removeClass("fancybox-margin");t=d.scrollTop();u=d.scrollLeft();o.removeClass("fancybox-lock");p.lock.remove();p.lock=null;d.scrollTop(t).scrollLeft(u)}},150)}catch(r){}}};i.extend(p,{version:"3.0.0",defaults:{theme:"default",padding:15,margin:[30,55,30,55],loop:true,arrows:true,closeBtn:true,expander:!g,caption:{type:"outside"},overlay:{closeClick:true,speedIn:0,speedOut:250,showEarly:true,css:{}},helpers:{},width:800,height:450,minWidth:100,minHeight:100,maxWidth:99999,maxHeight:99999,aspectRatio:false,fitToView:true,autoHeight:true,autoWidth:true,autoResize:true,autoCenter:!g,topRatio:0.5,leftRatio:0.5,openEffect:"elastic",openSpeed:350,openEasing:"easeOutQuad",closeEffect:"elastic",closeSpeed:350,closeEasing:"easeOutQuad",nextEffect:"elastic",nextSpeed:350,nextEasing:"easeOutQuad",prevEffect:"elastic",prevSpeed:350,prevEasing:"easeOutQuad",autoPlay:false,playSpeed:3000,onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeClose:i.noop,afterClose:i.noop,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-inner"></div></div>',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true"></iframe>',error:'<p class="fancybox-error">{{ERROR}}</p>',closeBtn:'<a title="{{CLOSE}}" class="fancybox-close" href="javascript:;"></a>',next:'<a title="{{NEXT}}" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="{{PREV}}" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},locale:"en",locales:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",EXPAND:"Display actual size",SHRINK:"Fit to the viewport",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow"},de:{CLOSE:"Schliessen",NEXT:"Vorwärts",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",EXPAND:"",SHRINK:"",PLAY_START:"",PLAY_STOP:""}},index:0,content:null,href:null,wrapCSS:"",modal:false,locked:true,preload:3,mouseWheel:true,scrolling:"auto",scrollOutside:true},current:null,coming:null,group:[],index:0,isActive:false,isOpen:false,isOpened:false,isMaximized:false,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,helpers:{},open:function(q,r){if(!q){return}if(false===p.close(true)){return}if(!i.isPlainObject(r)){r={}}p.opts=i.extend(true,{},p.defaults,r);p.populate(q);if(p.group.length){p._start(p.opts.index)}},populate:function(q){var r=[];if(!i.isArray(q)){q=[q]}i.each(q,function(t,s){var z=i.extend(true,{},p.opts),v,y,u,w,x;if(i.isPlainObject(s)){v=s}else{if(c(s)){v={href:s}}else{if(j(s)||i.type(s)==="object"&&s.nodeType){y=i(s);v=i(y).get(0);if(!v.href){v={href:s}}v=i.extend({href:y.data("fancybox-href")||y.attr("href")||v.href,title:y.data("fancybox-title")||y.attr("title")||v.title,type:y.data("fancybox-type"),element:y},y.data("fancybox-options"))}else{return}}}if(!v.type&&(v.content||v.href)){v.type=v.content?"html":p.guessType(y,v.href)}u=v.type||p.opts.type;if(u==="image"||u==="swf"){z.autoWidth=z.autoHeight=false;z.scrolling="visible"}if(u==="image"){z.aspectRatio=true}if(u==="iframe"){z.autoWidth=false;z.scrolling=g?"scroll":"visible"}if(q.length<2){z.margin=30}v=i.extend(true,{},z,v);w=v.margin;x=v.padding;if(i.type(w)==="number"){v.margin=[w,w,w,w]}if(i.type(x)==="number"){v.padding=[x,x,x,x]}if(v.modal){i.extend(true,v,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,overlay:{closeClick:false}})}if(v.autoSize!==f){v.autoWidth=v.autoHeight=!!v.autoSize}if(v.width==="auto"){v.autoWidth=true}if(v.height==="auto"){v.autoHeight=true}r.push(v)});p.group=p.group.concat(r)},cancel:function(){var q=p.coming;if(!q||false===p.trigger("onCancel")){return}p.hideLoading();if(p.ajaxLoad){p.ajaxLoad.abort()}if(p.imgPreload){p.imgPreload.onload=p.imgPreload.onerror=null}if(q.wrap){b(q.wrap)}p.ajaxLoad=p.imgPreload=p.coming=null;if(!p.current){p._afterZoomOut(q)}},close:function(q){if(q&&i.type(q)==="object"){q.preventDefault()}p.cancel();if(!p.isActive||p.coming||false===p.trigger("beforeClose")){return}p.unbind();p.isClosing=true;if(p.lock){p.lock.css("overflow","hidden")}if(!p.isOpen||q===true){p._afterZoomOut()}else{p.isOpen=p.isOpened=false;p.transitions.close()}},prev:function(r){var q=p.current;if(q){p.jumpto(q.index-1,(c(r)?r:q.direction.prev))}},next:function(r){var q=p.current;if(q){p.jumpto(q.index+1,(c(r)?r:q.direction.next))}},jumpto:function(q,s){var r=p.current;if(!(p.coming&&p.coming.index===q)){p.cancel();if(r.index==q){s=null}else{if(!s){s=r.direction[q>r.index?"next":"prev"]}}p.direction=s;p._start(q)}}});i.extend(p,{guessType:function(s,q){var t=s&&s.prop("class")?s.prop("class").match(/fancybox\.(\w+)/):0,r=false;if(t){return t[1]}if(c(q)){if(q.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)){r="image"}else{if(q.match(/\.(swf)((\?|#).*)?$/i)){r="swf"}else{if(q.charAt(0)==="#"){r="inline"}}}}else{if(c(s)){r="html"}}return r},trigger:function(r,t){var q,s=t||p.coming||p.current;if(!s){return}if(i.isFunction(s[r])){q=s[r].apply(s,Array.prototype.slice.call(arguments,1))}if(q===false||(r==="afterClose"&&p.isActive)){return false}if(s.helpers){i.each(s.helpers,function(w,v){var u=p.helpers[w],x;if(v&&u&&i.isFunction(u[r])){x=i.extend(true,{},u.defaults,v);u.opts=x;u[r](x,s)}})}i.event.trigger(r)},reposition:function(t,q){var s=q||p.current,r=s&&s.wrap,u;if(p.isOpen&&r){u=p._getPosition(s);if(t===false||(t&&t.type==="scroll")){r.stop(true).animate(u,200).css("overflow","visible")}else{r.css(u)}}},update:function(u){var s=(u&&u.type),q=e(),t=p.current,r;if(!t||!p.isOpen){return}if(s==="scroll"){if(p.wrap.outerHeight(true)>p.getViewport().h){return}if(p.didUpdate){clearTimeout(p.didUpdate)}p.didUpdate=setTimeout(function(){p.reposition(u);p.didUpdate=null},50);return}if(p.lock){p.lock.css("overflow","hidden")}p._setDimension();p.reposition(u);if(p.lock){p.lock.css("overflow","auto")}if(t.caption.type==="float"){r=p.getViewport().w-(p.wrap.outerWidth(true)-p.inner.width());t.caption.wrap.css("width",r).css("marginLeft",(r*0.5-p.inner.width()*0.5)*-1)}if(t.expander){if(t.canShrink){i(".fancybox-expand").show().attr("title",t.locales[t.locale].SHRINK)}else{if(t.canExpand){i(".fancybox-expand").show().attr("title",t.locales[t.locale].EXPAND)}else{i(".fancybox-expand").hide()}}}p.trigger("onUpdate")},toggle:function(q){var r=p.current;if(r&&p.isOpen){p.current.fitToView=i.type(q)==="boolean"?q:!p.current.fitToView;p.update(true)}},hideLoading:function(){i("#fancybox-loading").remove()},showLoading:function(){var r,q;p.hideLoading();r=i('<div id="fancybox-loading"></div>').click(p.cancel).appendTo("body");if(!p.defaults.fixed){q=p.getViewport();r.css({position:"absolute",top:(q.h*0.5)+q.y,left:(q.w*0.5)+q.x})}},getViewport:function(){var q;if(p.lock){q={x:p.lock.scrollLeft(),y:p.lock.scrollTop(),w:p.lock[0].clientWidth,h:p.lock[0].clientHeight}}else{q={x:d.scrollLeft(),y:d.scrollTop(),w:g&&k.innerWidth?k.innerWidth:d.width(),h:g&&k.innerHeight?k.innerHeight:d.height()}}return q},unbind:function(){if(j(p.wrap)){p.wrap.unbind(".fb")}if(j(p.inner)){p.inner.unbind(".fb")}a.unbind(".fb");d.unbind(".fb")},rebind:function(){var r=p.current,q;p.unbind();if(!r||!p.isOpen){return}d.bind("orientationchange.fb"+(g?"":" resize.fb")+(r.autoCenter&&!r.locked?" scroll.fb":""),p.update);q=r.keys;if(q){a.bind("keydown.fb",function(u){var s=u.which||u.keyCode,t=u.target||u.srcElement;if(s===27&&p.coming){return false}if(!u.ctrlKey&&!u.altKey&&!u.shiftKey&&!u.metaKey&&!(t&&(t.type||i(t).is("[contenteditable]")))){i.each(q,function(v,w){if(w[s]!==f){u.preventDefault();if(r.group.length>1){p[v](w[s])}return false}if(i.inArray(s,w)>-1){u.preventDefault();if(v==="play"){p.slideshow.toggle()}else{p[v]()}return false}})}})}p.lastScroll=e();if(r.mouseWheel&&p.group.length>1){p.wrap.bind("DOMMouseScroll.fb mousewheel.fb MozMousePixelScroll.fb",function(w){var x=w.originalEvent,v=x.target||0,y=(x.wheelDelta||x.detail||0),t=x.wheelDeltaX||0,s=x.wheelDeltaY||0,u=e();if(((v&&v.style&&!(v.style.overflow&&v.style.overflow==="hidden")&&((v.clientWidth&&v.scrollWidth>v.clientWidth)||(v.clientHeight&&v.scrollHeight>v.clientHeight))))){return}if(y===0||(p.current&&p.current.canShrink)){return}x.stopPropagation();if(p.lastScroll&&(u-p.lastScroll)<80){p.lastScroll=u;return}p.lastScroll=u;if(x.axis){if(x.axis===x.HORIZONTAL_AXIS){t=y*-1}else{if(x.axis===x.VERTICAL_AXIS){s=y*-1}}}if(t===0){if(s>0){p.prev("down")}else{p.next("up")}}else{if(t>0){p.prev("right")}else{p.next("left")}}})}p.touch.init()},rebuild:function(){var q=p.current;q.wrap.find(".fancybox-nav, .fancybox-close, .fancybox-expand").remove();if(q.arrows&&p.group.length>1){if(q.loop||q.index>0){i(p._translate(q.tpl.prev)).appendTo(p.inner).bind("click.fb",p.prev)}if(q.loop||q.index<p.group.length-1){i(p._translate(q.tpl.next)).appendTo(p.inner).bind("click.fb",p.next)}}if(q.closeBtn){i(p._translate(q.tpl.closeBtn)).appendTo(p.wrap).bind("click.fb",p.close)}if(q.expander&&q.type==="image"){i('<a title="Expand image" class="fancybox-expand" href="javascript:;"></a>').appendTo(p.inner).bind("click.fb",p.toggle);if(!q.canShrink&&!q.canExpand){}}},_start:function(q){var r,s;if(p.opts.loop){if(q<0){q=p.group.length+(q%p.group.length)}q=q%p.group.length}r=p.group[q];if(!r){return false}r=i.extend(true,{},p.opts,r);r.group=p.group;r.index=q;p.coming=r;if(false===p.trigger("beforeLoad")){p.coming=null;return}p.isActive=true;p._build();a.bind("keydown.loading",function(t){if((t.which||t.keyCode)===27){a.unbind(".loading");t.preventDefault();p.cancel()}});if(r.overlay&&r.overlay.showEarly){p.overlay.open(r.overlay)}s=r.type;if(s==="image"){p._loadImage()}else{if(s==="ajax"){p._loadAjax()}else{if(s==="iframe"){p._loadIframe()}else{if(s==="inline"){p._loadInline()}else{if(s==="html"||s==="swf"){p._afterLoad()}else{p._error()}}}}}},_build:function(){var t=p.coming,v=t.caption.type,u,r,q,s;t.wrap=u=i('<div class="fancybox-wrap"></div>').appendTo(t.parent||"body").addClass("fancybox-"+t.theme);t.inner=r=i('<div class="fancybox-inner"></div>').appendTo(u);t[v==="outside"||v==="float"?"inner":"wrap"].addClass("fancybox-skin fancybox-"+t.theme+"-skin");if(t.locked&&t.overlay&&p.defaults.fixed){if(!p.lock){p.lock=i('<div id="fancybox-lock"></div>').appendTo(u.parent())}p.lock.unbind().append(u);if(t.overlay.closeClick){p.lock.click(function(w){if(i(w.target).is(p.lock)){p.close()}})}if(a.height()>d.height()||o.css("overflow-y")==="scroll"){i("*:visible").filter(function(){return(i(this).css("position")==="fixed"&&!i(this).hasClass("fancybox-overlay")&&i(this).attr("id")!=="fancybox-lock")}).addClass("fancybox-margin");o.addClass("fancybox-margin")}q=d.scrollTop();s=d.scrollLeft();o.addClass("fancybox-lock");d.scrollTop(q).scrollLeft(s)}p.trigger("onReady")},_error:function(q){if(!p.coming){return}i.extend(p.coming,{type:"html",autoWidth:true,autoHeight:true,closeBtn:true,minWidth:0,minHeight:0,padding:[15,15,15,15],scrolling:"visible",hasError:q,content:p._translate(p.coming.tpl.error)});p._afterLoad()},_loadImage:function(){var q=p.imgPreload=new Image();q.onload=function(){this.onload=this.onerror=null;i.extend(p.coming,{width:this.width,height:this.height,content:i(this).addClass("fancybox-image")});p._afterLoad()};q.onerror=function(){this.onload=this.onerror=null;p._error("image")};q.src=p.coming.href;if(q.complete!==true||q.width<1){p.showLoading()}},_loadAjax:function(){var s=p.coming,r=s.href,t,q;t=r.split(/\s+/,2);r=t.shift();q=t.shift();p.showLoading();p.ajaxLoad=i.ajax(i.extend({},s.ajax,{url:s.href,error:function(u,v){if(p.coming&&v!=="abort"){p._error("ajax",u)}else{p.hideLoading()}},success:function(u,v){if(v==="success"){if(q){u=i("<div>").html(u).find(q)}s.content=u;p._afterLoad()}}}))},_loadIframe:function(){var q=p.coming,r;q.content=r=i(q.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",g?"auto":q.iframe.scrolling);if(q.iframe.preload){p.showLoading();p._setDimension(q);q.wrap.addClass("fancybox-tmp");r.one("load.fb",function(){if(q.iframe.preload){i(this).data("ready",1);i(this).bind("load.fb",p.update);p._afterLoad()}})}r.attr("src",q.href).appendTo(q.inner);if(!q.iframe.preload){p._afterLoad()}else{if(r.data("ready")!==1){p.showLoading()}}},_loadInline:function(){var r=p.coming,q=r.href;r.content=i(c(q)?q.replace(/.*(?=#[^\s]+$)/,""):q);if(r.content.length){p._afterLoad()}else{p._error()}},_preloadImages:function(){var v=p.group,u=p.current,q=v.length,s=u.preload?Math.min(u.preload,q-1):0,t,r;for(r=1;r<=s;r+=1){t=v[(u.index+r)%q];if(t&&t.type==="image"&&t.href){new Image().src=t.href}}},_afterLoad:function(){var r=p.coming,q=p.current;a.unbind(".loading");if(!r||p.isActive===false||false===p.trigger("afterLoad",r,q)){p.hideLoading();if(r&&r.wrap){b(r.wrap)}if(!q){p._afterZoomOut(r)}p.coming=null;return}i.extend(p,{wrap:r.wrap.addClass("fancybox-type-"+r.type+" fancybox-"+(g?"mobile":"desktop")+" fancybox-"+r.theme+"-"+(g?"mobile":"desktop")+" "+r.wrapCSS),inner:r.inner,current:r,previous:q});p._prepare();p.trigger("beforeShow",r,q);p.isOpen=false;p.coming=null;p._setDimension();p.hideLoading();if(r.overlay&&!p.overlay.el){p.overlay.open(r.overlay)}p.transitions.open()},_prepare:function(){var x=p.current,y=x.content||"",r=x.wrap,E=x.inner,t=x.margin,B=x.padding,q=x.href,A=x.type,v=x.scrolling,D=x.caption,u=x.title,s=D.type,C="fancybox-placeholder",z="fancybox-display",w;if(A!=="iframe"&&j(y)&&y.length){if(!y.data(C)){y.data(z,y.css("display")).data(C,i('<div class="'+C+'"></div>').insertAfter(y).hide())}y=y.show().detach();x.wrap.bind("onReset",function(){if(i(this).find(y).length){y.css("display",y.data(z)).replaceAll(y.data(C)).data(C,false).data(z,false)}})}if(A==="swf"){y='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+q+'"></param>';w="";i.each(x.swf,function(F,G){y+='<param name="'+F+'" value="'+G+'"></param>';w+=" "+F+'="'+G+'"'});y+='<embed src="'+q+'" type="application/x-shockwave-flash" width="100%" height="100%"'+w+"></embed></object>"}if(!(j(y)&&y.parent().is(x.inner))){x.inner.append(y);x.content=x.inner.children(":last")}i.each(["Top","Right","Bottom","Left"],function(G,F){if(t[G]){r.css("margin"+F,h(t[G]))}if(B[G]){if(!(F==="Bottom"&&s==="outside")){r.css("padding"+F,h(B[G]))}if(s==="outside"||s==="float"){E.css("border"+F+"Width",h(B[G]));if(F==="Top"||F==="Left"){E.css("margin"+F,h(B[G]*-1))}}}});if(i.isFunction(u)){u=u.call(x.element,x)}if(c(u)&&i.trim(u)!==""){x.caption.wrap=i('<div class="fancybox-title fancybox-title-'+s+'-wrap">'+u+"</div>").appendTo(x[s==="over"?"inner":"wrap"]);if(s==="float"){x.caption.wrap.width(p.getViewport().w-(p.wrap.outerWidth(true)-p.inner.width())).wrapInner("<div></div>")}}},_setDimension:function(V){var y=p.getViewport(),H=V||p.current,w=H.wrap,U=H.inner,I=H.width,F=H.height,B=H.minWidth,t=H.minHeight,M=H.maxWidth,G=H.maxHeight,E=H.margin,s=H.scrollOutside?H.scrollbarWidth:0,E=H.margin,z=H.padding,A=H.scrolling,K=1,T,R,L,J,D,C,u,v,x,Q,q,O,r,P,S;A=A.split(",");T=A[0];R=A[1]||T;H.inner.css("overflow-x",T==="yes"?"scroll":(T==="no"?"hidden":T)).css("overflow-y",R==="yes"?"scroll":(R==="no"?"hidden":R));J=E[1]+E[3]+z[1]+z[3];L=E[0]+E[2]+z[0]+z[2];B=m(l(B)?m(B,"w")-J:B);M=m(l(M)?m(M,"w")-J:M);t=m(l(t)?m(t,"h")-L:t);G=m(l(G)?m(G,"h")-L:G);D=m(l(I)?m(I,"w")-J:I);C=m(l(F)?m(F,"h")-L:F);if(H.fitToView){M=Math.min(M,m("100%","w")-J);G=Math.min(G,m("100%","h")-L)}Q=y.w;q=y.h;if(H.type==="iframe"){v=H.content;w.removeClass("fancybox-tmp");if((H.autoWidth||H.autoHeight)&&v&&v.data("ready")===1){try{if(v[0].contentWindow&&v[0].contentWindow.document.location){x=v.contents().find("body");U.addClass("fancybox-tmp");U.width(screen.width-J).height(99999);if(s){x.css("overflow-x","hidden")}if(H.autoWidth){D=x.outerWidth(true)}if(H.autoHeight){C=x.outerHeight(true)}U.removeClass("fancybox-tmp")}}catch(N){}}}else{if((H.autoWidth||H.autoHeight)&&!(H.type==="image"||H.type==="swf")){U.addClass("fancybox-tmp");if(H.autoWidth){U.width("auto")}else{U.width(M)}if(H.autoHeight){U.height("auto")}else{U.height(G)}if(H.autoWidth){D=U[0].scrollWidth||U.width()}if(H.autoHeight){C=U[0].scrollHeight||U.height()}U.removeClass("fancybox-tmp")}}I=D;F=C;u=D/C;if(!H.autoResize){w.css({width:h(I),height:"auto"});U.css({width:h(I),height:h(F)});return}if(H.aspectRatio){if(I>M){I=M;F=I/u}if(F>G){F=G;I=F*u}if(I<B){I=B;F=I/u}if(F<t){F=t;I=F*u}}else{I=Math.max(B,Math.min(I,M));if(H.autoHeight&&H.type!=="iframe"){U.width(I);C=F=U[0].scrollHeight}F=Math.max(t,Math.min(F,G))}w.css({width:h(I),height:"auto"});U.css({width:h(I),height:h(F)});O=m(w.outerWidth(true));r=m(w.outerHeight(true));if(H.fitToView){if(H.aspectRatio){while((O>Q||r>q)&&I>B&&F>t){if(K++>30){break}F=Math.max(t,Math.min(G,F-10));I=m(F*u);if(I<B){I=B;F=m(I/u)}if(I>M){I=M;F=m(I/u)}w.css({width:h(I)});U.css({width:h(I),height:h(F)});O=m(w.outerWidth(true));r=m(w.outerHeight(true))}}else{I=Math.max(B,Math.min(I,I-(O-Q)));F=Math.max(t,Math.min(F,F-(r-q)))}}if(s&&T==="auto"&&(F<U[0].scrollHeight||(j(H.content)&&H.content[0]&&F<H.content[0].offsetHeight))&&(I+J+s)<M){I+=s}w.css({width:I});U.css({width:h(I),height:h(F)});O=m(w.outerWidth(true));r=m(w.outerHeight(true));P=(O>Q||r>q)&&I>B&&F>t;S=(O<Q||r<q)&&(H.aspectRatio?(I<M&&F<G&&I<D&&F<C):((I<M||F<G)&&(I<D||F<C)));H.canShrink=P;H.canExpand=S;if(!v&&H.autoHeight&&F>t&&F<G&&!S){U.height("auto")}},_getPosition:function(r){var v=r||p.current,s=v.wrap,q=p.getViewport(),w={},u=q.y,t=q.x;w={top:h(Math.max(u,u+((q.h-s.outerHeight(true))*v.topRatio))),left:h(Math.max(t,t+((q.w-s.outerWidth(true))*v.leftRatio))),width:h(s.width()),height:h(s.height())};return w},_afterZoomIn:function(){var q=p.current;if(!q){return}if(p.lock){p.lock.css("overflow","auto")}p.isOpen=p.isOpened=true;p.rebuild();p.rebind();if(q.caption&&q.caption.wrap){q.caption.wrap.show().css({visibility:"visible",opacity:0,left:0}).animate({opacity:1},"fast")}p.update();p.wrap.css("overflow","visible").addClass("fancybox-open").focus();p[p.wrap.hasClass("fancybox-skin")?"wrap":"inner"].addClass("fancybox-"+q.theme+"-skin-open");if(q.caption&&q.caption.wrap){q.caption.wrap.show().css("left",0).animate({opacity:1},"fast")}if(q.margin[2]>0){i('<div class="fancybox-spacer"></div>').css("height",h(q.margin[2]-2)).appendTo(p.wrap)}p.trigger("afterShow");p._preloadImages();if(q.autoPlay&&!p.slideshow.isActive){p.slideshow.start()}},_afterZoomOut:function(r){var q=function(){b(".fancybox-wrap")};p.hideLoading();r=r||p.current;if(r&&r.wrap){r.wrap.hide()}i.extend(p,{group:[],opts:{},coming:null,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,inner:null});p.trigger("afterClose",r);if(!p.coming&&!p.current){if(r.overlay){p.overlay.close(r.overlay,q)}else{q()}}},_translate:function(s){var r=p.coming||p.current,q=r.locales[r.locale];return s.replace(/\{\{(\w+)\}\}/g,function(t,v){var u=q[v];if(u===f){return t}return u})}});p.transitions={_getOrig:function(s){var t=s||p.current,q=t.wrap,u=t.element,x=t.orig,w=p.getViewport(),v={},r=50,y=50;if(!x&&u&&u.is(":visible")){x=u.find("img:first:visible");if(!x.length){x=u}}if(!x&&t.group[0].element){x=t.group[0].element.find("img:visible:first")}if(j(x)&&x.is(":visible")){v=x.offset();if(x.is("img")){r=x.outerWidth();y=x.outerHeight()}if(p.lock){v.top-=d.scrollTop();v.left-=d.scrollLeft()}}else{v.top=w.y+(w.h-y)*t.topRatio;v.left=w.x+(w.w-r)*t.leftRatio}v={top:h(v.top-(q.outerHeight(true)-q.height())*0.5),left:h(v.left-(q.outerWidth(true)-q.width())*0.5),width:h(r),height:h(y)};return v},_getCenter:function(r){var v=r||p.current,s=v.wrap,q=p.getViewport(),w={},u=q.y,t=q.x;w={top:h(Math.max(u,u+((q.h-s.outerHeight(true))*v.topRatio))),left:h(Math.max(t,t+((q.w-s.outerWidth(true))*v.leftRatio))),width:h(s.width()),height:h(s.height())};return w},_prepare:function(r,u){var t=r||p.current,s=t.wrap,q=t.inner;s.height(s.height());q.css({width:(q.width()*100/s.width())+"%",height:(Math.floor((q.height()*100/s.height())*100)/100)+"%"});if(u===true){s.find(".fancybox-title, .fancybox-spacer, .fancybox-close, .fancybox-nav").remove()}q.css("overflow","hidden")},fade:function(s,r){var t=this._getCenter(s),q={opacity:0};return((r==="open"||r==="changeIn")?[i.extend(t,q),{opacity:1}]:[{},q])},drop:function(t,s){var r=i.extend(this._getCenter(t),{opacity:1}),q=i.extend({},r,{opacity:0,top:h(Math.max(p.getViewport().y-t.margin[0],m(r.top)-200))});return((s==="open"||s==="changeIn")?[q,r]:[{},q])},elastic:function(t,v){var r=t.wrap,s=t.margin,x=p.getViewport(),y=p.direction,w=this._getCenter(t),B=i.extend({},w),A=i.extend({},w),q,u,z;if(v==="open"){B=this._getOrig(t)}else{if(v==="close"){B={};A=this._getOrig(t)}else{if(y){q=(y==="up"||y==="down")?"top":"left";u=(y==="up"||y==="left")?200:-200;if(v==="changeIn"){z=m(B[q])+u;if(y==="left"){z=Math.min(z,x.x+x.w-s[3]-r.outerWidth()-1)}else{if(y==="right"){z=Math.max(z,x.x-s[1])}else{if(y==="up"){z=Math.min(z,x.y+x.h-s[0]-r.outerHeight()-1)}else{z=Math.max(z,x.y-s[2])}}}B[q]=z}else{z=m(r.css(q))-u;B={};if(y==="left"){z=Math.max(z,x.x-s[3])}else{if(y==="right"){z=Math.min(z,x.x+x.w-s[1]-r.outerWidth()-1)}else{if(y==="up"){z=Math.max(z,x.y-s[0])}else{z=Math.min(z,x.y+x.h-s[2]-r.outerHeight()-1)}}}A[q]=z}}}}if(v==="open"||v==="changeIn"){B.opacity=0;A.opacity=1}else{A.opacity=0}return[B,A]},open:function(){var v=p.current,s=p.previous,u=p.direction,r,x,t,w,q;if(s){s.wrap.stop(true).removeClass("fancybox-opened")}if(p.isOpened){r=v.nextEffect,t=v.nextSpeed;w=v.nextEasing;q="changeIn"}else{r=v.openEffect;t=v.openSpeed;w=v.openEasing;q="open"}if(r==="none"){p._afterZoomIn()}else{x=this[r](v,q);if(r==="elastic"){this._prepare(v)}v.wrap.css(x[0]);v.wrap.animate(x[1],t,w,p._afterZoomIn)}if(s){if(!p.isOpened||s.prevEffect==="none"){b(i(".fancybox-wrap").not(v.wrap))}else{s.wrap.stop(true).removeClass("fancybox-opened");x=this[s.prevEffect](s,"changeOut");this._prepare(s,true);s.wrap.animate(x[1],s.prevSpeed,s.prevEasing,function(){b(s.wrap)})}}},close:function(){var s=p.current,r=s.wrap.stop(true).removeClass("fancybox-opened"),q=s.closeEffect,t;if(q==="none"){return p._afterZoomOut()}this._prepare(s,true);t=this[q](s,"close");r.addClass("fancybox-animating").animate(t[1],s.closeSpeed,s.closeEasing,p._afterZoomOut)}};p.slideshow={_clear:function(){if(this._timer){clearTimeout(this._timer)}},_set:function(){this._clear();if(p.current&&this.isActive){this._timer=setTimeout(p.next,this._speed)}},_timer:null,_speed:null,isActive:false,start:function(q){var r=p.current;if(r&&(r.loop||r.index<r.group.length-1)){this.stop();this.isActive=true;this._speed=q||r.playSpeed;a.bind({"beforeLoad.player":i.proxy(this._clear,this),"onUpdate.player":i.proxy(this._set,this),"onCancel.player beforeClose.player":i.proxy(this.stop,this)});this._set();p.trigger("onPlayStart")}},stop:function(){this._clear();a.unbind(".player");this.isActive=false;this._timer=this._speed=null;p.trigger("onPlayEnd")},toggle:function(){if(this.isActive){this.stop()}else{this.start.apply(this,arguments)}}};p.overlay={el:null,theme:"",open:function(u){var t=this,r=this.el,s=p.defaults.fixed,q,v;u=i.extend({},p.defaults.overlay,u);if(r){r.stop(true).removeAttr("style").unbind(".overlay")}else{r=i('<div class="fancybox-overlay'+(s?" fancybox-overlay-fixed":"")+'"></div>').appendTo(u.parent||"body")}if(u.closeClick){r.bind("click.overlay",function(w){if(p.lastTouch&&(e()-p.lastTouch)<300){return false}if(p.isActive){p.close()}else{t.close()}return false})}v=u.theme||(p.coming?p.coming.theme:"default");if(v!==this.theme){r.removeClass("fancybox-"+this.theme+"-overlay")}this.theme=v;r.addClass("fancybox-"+v+"-overlay").css(u.css);q=r.css("opacity");if(!this.el&&q<1&&u.speedIn){r.css({opacity:0,filter:"alpha(opacity=0)"}).fadeTo(u.speedIn,q)}this.el=r;if(!s){d.bind("resize.overlay",i.proxy(this.update,this));this.update()}},close:function(q,r){q=i.extend({},p.defaults.overlay,q);if(this.el){this.el.stop(true).fadeOut(q.speedOut,function(){d.unbind("resize.overlay");i(".fancybox-overlay").remove();p.overlay.el=null;if(i.isFunction(r)){r()}})}},update:function(){this.el.css({width:"100%",height:"100%"});this.el.width(a.width()).height(a.height())}};p.touch={startX:0,wrapX:0,dx:0,isMoving:false,_start:function(t){var s=p.current,r=t.originalEvent.touches?t.originalEvent.touches[0]:t,q=e();if(!p.isOpen||p.wrap.is(":animated")||!(i(t.target).is(p.inner)||i(t.target).parent().is(p.inner))){return}if(p.lastTouch&&(q-p.lastTouch)<300){t.preventDefault();p.lastTouch=q;this._cancel(true);p.toggle();return false}p.lastTouch=q;if(p.wrap&&p.wrap.outerWidth()>p.getViewport().w){return}t.preventDefault();if(r&&p.wrap&&p.wrap.outerWidth()<p.getViewport().w){this.startX=r.pageX;this.wrapX=p.wrap.position().left;this.isMoving=true;p.inner.bind("touchmove.fb",i.proxy(this._move,this)).one("touchend.fb touchcancel.fb",i.proxy(this._cancel,this))}},_move:function(s){var r=s.originalEvent.touches?s.originalEvent.touches[0]:s,q=this.startX-r.pageX;if(!this.isMoving||!p.isOpen){return}this.dx=q;if(p.current.wrap.outerWidth(true)<=d.width()){if(Math.abs(q)>=50){s.preventDefault();this.last=0;this._cancel(true);if(q>0){p.next("left")}else{p.prev("right")}}else{if(Math.abs(q)>3){s.preventDefault();this.last=0;p.wrap.css("left",this.wrapX-q)}}}},_clear:function(){this.startX=this.wrapX=this.dx=0;this.isMoving=false},_cancel:function(q){if(p.inner){p.inner.unbind("touchmove.fb")}if(p.isOpen&&Math.abs(this.dx)>3){p.reposition(false)}this._clear()},init:function(){var q=this;if(p.inner&&p.touch){this._cancel(true);p.inner.bind("touchstart.fb",i.proxy(this._start,this))}}};if(!i.easing.easeOutQuad){i.easing.easeOutQuad=function(r,s,q,v,u){return -v*(s/=u)*(s-2)+q}}a.ready(function(){var s,r,q,t;if(i.scrollbarWidth===f){i.scrollbarWidth=function(){var v=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),w=v.children(),u=w.innerWidth()-w.height(99).innerWidth();v.remove();return u}}if(i.support.fixedPosition===f){i.support.fixedPosition=(function(){var v=i('<div style="position:fixed;top:20px;padding:0;margin:0;border:0;"></div>').appendTo("body"),u=v.css("position")==="fixed"&&((v[0].offsetTop>18&&v[0].offsetTop<22)||v[0].offsetTop===15);v.remove();return u}())}i.extend(p.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")});q=d.scrollTop();t=d.scrollLeft();s=i(k).width();o.addClass("fancybox-lock-test");r=i(k).width();o.removeClass("fancybox-lock-test");d.scrollTop(q).scrollLeft(t);p.lockMargin=(r-s);i("<style type='text/css'>.fancybox-margin{margin-right:"+p.lockMargin+"px;}</style>").appendTo("head");if(i("script[src*='jquery.fancybox.min.js']").length>0&&i("script[src*='jquery.fancybox.min.js']").attr("src").match(/autorun/)){i("a[href$='.jpg'],a[href$='.png'],a[href$='.gif'],.fancybox").attr("data-fancybox-group","gallery").fancybox()}});i.fn.fancybox=function(r){var u=this,q=this.length?this.selector:false,t=(q&&q.indexOf("()")<0&&!(r&&r.live===false));var s=function(y){var A=t?i(q):u,x=i(this).blur(),z=r.groupAttr||"data-fancybox-group",w=x.attr(z),v=this.rel;if(!w&&v&&v!=="nofollow"){z="rel";w=v}if(w){x=A.filter("["+z+'="'+w+'"]');r.index=x.index(this)}if(x.length){y.preventDefault();p.open(x.get(),r)}};r=r||{};if(t){a.undelegate(q,"click.fb-start").delegate(q+":not('.fancybox-close,.fancybox-nav,.fancybox-wrap')","click.fb-start",s)}else{u.unbind("click.fb-start").bind("click.fb-start",s)}return this}}(window,document,jQuery));